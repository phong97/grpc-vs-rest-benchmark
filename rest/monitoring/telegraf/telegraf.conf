[agent]
  interval = "10s"
  round_interval = true
  hostname = "$HOSTNAME"

[[outputs.prometheus_client]]
  listen = ":9273"
  path   = "/metrics"

# Thu thập CPU, memory, network
[[inputs.cpu]]
  percpu = false
  totalcpu = true
  report_active = false

[[inputs.mem]]

[[inputs.net]]
  interfaces = ["eth0"]  # tên interface trong container, hoặc bỏ để thu thập tất cả

[[inputs.netstat]]

# Đổi tên measurement và field để phù hợp dashboard (dùng processor rename)
[[processors.rename]]
  [[processors.rename.replace]]
    measurement = "cpu"
    dest = "cpu_usage_idle"
    fields = {usage_idle = "cpu_usage_idle"}

  [[processors.rename.replace]]
    measurement = "mem"
    dest = "mem_used"
    fields = {used = "mem_used"}

  [[processors.rename.replace]]
    measurement = "net"
    dest = ""
    fields = {bytes_recv = "net_bytes_recv", bytes_sent = "net_bytes_sent"}

  # netstat plugin tạo trường conntrack_listener_conn_accepted_total, không cần đổi tên
